library(randomForest)
library(dplyr)
train<-read.csv("../input/train.csv")
test<-read.csv("../input/test.csv")
test$revenue<-NA
train<-train[train$revenue<16000000,]
combined<-rbind(train,test)
dim(train)
dim(combined)
combined$date<-as.Date(strptime(combined$Open.Date,"%m/%d/%Y"))
combined$date<-as.Date(combined$date)
str(combined$date) 
df <- data.frame(date = combined$date,year = as.numeric(format(combined$date, format = "%Y")),month = as.numeric(format(combined$date, format = "%m")),day = as.numeric(format(combined$date, format = "%d")))
combined$day<-df$day
combined$year<-as.factor(df$year)
combined$month<-as.factor(df$month)
combined$days<-as.numeric(as.Date("2018-10-08")-combined$date)
combined$City<-NULL
combined$Id<-combined$date<-combined$Open.Date<-NULL
train<-combined[1:135,]
test<-combined[136:100135,]
test$revenue<-NULL
set.seed(147)
fit<-randomForest(train$revenue~.,data=train)
y_pred<-predict(fit,test)
test1<-read.csv("../input/test.csv")
Id<-test1$Id
Prediction<-y_pred
submission<-data.frame(Id,Prediction)
write.csv(submission,"submission.csv",row.names=F)